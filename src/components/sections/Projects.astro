---
import GitHub from "@/icons/GitHub.astro";
import Arrow from "@/icons/Arrow.astro";
import Section from "../Section.astro";
import HTML from "@/icons/html.astro"
import CSS from "@/icons/css.astro"
import JavaScript from "@/icons/javascript.astro"
import TypeScript from "@/icons/type.astro"
import React from "@/icons/react.astro"
import Node from "@/icons/node.astro"
import MySQL from "@/icons/sql.astro"
import Git from "@/icons/git.astro"
import Next from "@/icons/next.astro"
import Swift from "@/icons/swift.astro"
import SwiftUI from "@/icons/swiftui.astro"
import Kotlin from "@/icons/kotlin.astro"
import Flutter from "@/icons/flutter.astro"
import Canva from "@/icons/Canva.astro"
import Illustrator from "@/icons/Illustrator.astro"
import Photoshop from "@/icons/Photoshop.astro"
import Joomla from "@/icons/Joomla.astro"
import Tailwind from "@/icons/tailwind.astro";

import { projects } from "@cv";
import astro from "@/icons/Astro_logo.astro";
import Firebase from "@/icons/Firebase.astro";
import Java from "@/icons/Java.astro";
import Express from "@/icons/Express.astro";
import Ionic from "@/icons/Ionic.astro";

const SKILLS_ICONS: Record<string, any> = {
	HTML,
	CSS,
	JavaScript,
	TypeScript,
	React,
	Node,
	MySQL,
	Git,
	GitHub,
	Next,
	Swift,
	SwiftUI,
	Kotlin,
	Flutter,
	Canva,
	Illustrator,
	Photoshop,
	Joomla,
	astro,
	Tailwind,
	Firebase,
	Java,
	Express,
	Ionic
}
---

<Section className={Astro.props.className} title="Projects">
	<div class="grid grid-cols-1 gap-3 md:grid-cols-2 print:flex print:flex-col">
		{
			projects.map(({ url, description, highlights, name, image, isActive, github, skills }) => {
				return (
					<div role="contentinfo" class="grid-span-1 flex justify-center items-center ring-skin-muted relative rounded-md shadow-sm ring-1 overflow-hidden">
						{/* Imagen de fondo */}
						<div class="absolute inset-0">
							<img src={image} alt={name} class="w-full h-full object-cover" />
							<div class="absolute inset-0 bg-black bg-opacity-40"></div>
						</div>

						{/* Contenedor del contenido superpuesto */}
						<div class="relative z-10 flex flex-col bg-white bg-opacity-90 rounded-md p-5 m-5">
							<div class="flex items-center justify-between">
								<div class="flex items-center gap-2">
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-folder size-4">
										<path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z" />
									</svg>
									<div class="flex items-center gap-[6px]">
										{isActive ? (
											<a class="hover:text-skin-hue group flex items-center gap-[6px] text-lg decoration-dotted underline-offset-[5px] hover:underline" href={url} title={`Ver ${name}`} target="_blank">
												{name}
												<span class="text-skin-hue transition ease-linear group-hover:-translate-y-0.5 group-hover:translate-x-0.5">
													<Arrow />
												</span>
											</a>
										) : (
											<span>{name}</span>
										)}
									</div>
								</div>

								{github && (
									<a href={github} title="View slug repository on GitHub" target="_blank" rel="noopener" class="opacity-75 transition-opacity duration-100 hover:opacity-100">
										<GitHub />
									</a>
								)}
							</div>
							<p class="text-sm text-skin-base mt-3">{description}</p>
							<ul class="mt-2 text-sm text-skin-muted">
								{highlights.map((highlight) => {
									return <li>{highlight}</li>;
								})}
							</ul>
							<ul class="flex flex-wrap gap-2 mt-6" aria-label="Technologies used">
							{skills && skills.map(skill => {
								const iconName = skill.toLowerCase() === "astro" ? "astro" : 
												skill === "Affinity Photo" ? "Photoshop" : skill;

								const Icon = SKILLS_ICONS[iconName];

								return (
								<li class="bg-skin-button-accent/20 border-skin-hue/20 text-skin-hue print:p-0 print:bg-transparent print:text-zinc-800 flex gap-x-2 items-center border-solid print:border-none border rounded-md px-2 py-0.5 text-xs">
									{Icon && <Icon class="min-w-5 min-h-5 w-5 h-5" />} <span>{skill}</span>
								</li>
								);
							})}
							</ul>
						</div>
					</div>
				);
			})
		}
	</div>
</Section>


<style>
	ul {
		@apply ml-4 list-disc space-y-1;
		li {
			@apply text-skin-muted;
		}
	}

	footer {
		display: flex;
		flex-wrap: wrap;
		gap: 4px;
		font-size: 0.6rem;
	}

	footer span {
		border-radius: 6px;
		background: #eee;
		color: #444;
		font-size: 0.6rem;
		font-weight: 500;
		padding: 0.2rem 0.6rem;
	}
	@keyframes flicker {
		0% {
			opacity: 1;
		}
		50% {
			opacity: 0.25;
		}
		100% {
			opacity: 1;
		}
	}
</style>
